<!-- Profile Card -->
<div class="bg-white rounded-xl shadow border border-gray-200 overflow-hidden">
  <!-- Profile Header with Avatar -->
  <div class="bg-gradient-to-r from-indigo-500 to-purple-600 h-32"></div>
  <div class="px-6 pb-6">
    <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4 -mt-16">
      <div class="flex items-end gap-4">
        <!-- Avatar -->
        <div class="relative">
          <div id="profile-avatar" class="w-32 h-32 rounded-full border-4 border-white shadow-lg bg-gray-100 flex items-center justify-center overflow-hidden cursor-pointer">
            <% if (userProfile && userProfile.profilePictureBase64) { %>
              <img src="<%= userProfile.profilePictureBase64 %>" alt="Profile Picture" class="w-full h-full object-cover">
            <% } else { %>
              <span class="text-4xl font-bold text-gray-400"><%= user.username.substring(0, 2).toUpperCase() %></span>
            <% } %>
          </div>
          <button id="upload-avatar-btn" class="avatar-action-btn hidden absolute bottom-0 right-0 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full p-2 shadow-lg transition">
            <i class="fas fa-camera"></i>
          </button>
          <% if (userProfile && userProfile.profilePictureBase64) { %>
          <button id="remove-avatar-btn" class="avatar-action-btn hidden absolute bottom-0 left-0 bg-red-600 hover:bg-red-700 text-white rounded-full p-2 shadow-lg transition" aria-label="<%= __('REMOVE_PROFILE_PICTURE') || 'Remove profile picture' %>">
            <i class="fas fa-trash"></i>
          </button>
          <% } %>
          <input type="file" id="avatar-input" accept="image/*" class="hidden">
        </div>
        
        <!-- User Info -->
        <div class="mb-2">
          <h2 class="text-2xl font-bold text-white"><%= user.username %></h2>
          <p class="text-sm text-gray-500"><%= user.email %></p>
          <span class="inline-block mt-1 px-3 py-1 text-xs font-semibold rounded-full <%= user.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800' %>">
            <%= user.role === 'admin' ? 'Administrator' : 'User' %>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>